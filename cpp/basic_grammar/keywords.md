# keywords

这篇主要写 `static`,  `extern`,  `const` 等关键字，并做一定延伸，如全局变量、局部变量，头文件，顶层 `const`、底层 `const` 等。

## static

-   static 修饰的静态局部变量只执行初始化一次，而且延长了局部变量的生命周期，在程序开始时（main函数之前）便进行初始化，直到程序运行结束后才释放。

-   static 修饰的全局变量，只能在本文件中访问，不能在其他文件中访问，即使是 extern 外部声明也不可以，其他文件可以定义相同名字的变量，不会发生冲突。

-   static 修饰一个函数，则这个函数只能在本文件中调用，不能被其他文件调用。

-   static 修饰的变量存放在全局数据区的静态变量区，包括全局静态变量和局部静态变量。初始化时自动初始化为 0.

### 在 cpp 中

1.  **被 static 修饰的变量、被 static 修饰的方法统一属于类的静态资源，是类实例之间共享的，换言之，一处变、处处变。**在 C++ 中，静态成员是属于整个类的而不是某个对象，静态成员变量只存储一份供所有对象共用。所以在所有对象中都可以共享它。使用静态成员变量实现多个对象之间的数据共享不会破坏隐藏的原则，保证了安全性还可以节省内存。
2.  **静态成员函数中不能使用非静态成员，非静态成员函数可以调用静态成员函数。**因为静态成员函数属于整个类，在类实例化对象之前就已经分配空间了，而类的非静态成员必须在类实例化对象后才有内存空间，所以这个调用就出错了，就好比没有声明一个变量却提前使用它一样。
3.  **类的静态成员变量必须先初始化再使用，且只能在类体外进行初始化**

---

*此处要补上内存管理的相关内容，留作明天（2020.8.22）的任务*

---





## extern

extern 其实只有两个作用：

其一：与 c 一起连用，如 `extern "C" void func(int a, int b);` 告诉编译器在编译 func 这个函数时按 c 的规则。

其二：在头文件中声明函数或全局变量。

以下是关于头文件以及 c 语言宏的一些说明：（自己凭印象整理）

-   `#include<stdio.h>` 尖括号 `<>` 一般用于编译器给的头文件

    `#include"file.h"` 双引号`""` 一般用于自己写的头文件

-   `#include...` 和 `#define ... ...` 只做简单的文本替换

    所以使用 define 的时候，要注意所有参数都要加括号

    define 可以嵌套，也可以使用多个参数，也能包含多条语句

-   在 `.h` 文件中声明，在 `.cpp` 文件中定义。使用和定义函数的地方都应该 `#include` 这个头文件

-   一个头文件只放一个类

-   `inline` 函数主题放在 `.h` 文件即可，不需要放入 `.cpp` 中

    `inline` 适合代码较少的函数，频繁调用的函数，不适合代码长的函数，或者递归函数



## const

const 用于告诉编译器某个值保持不变

### const 修饰指针

```cpp
const int *p;
int const *p;
int * const p;
```

区分方法在于，观察 const 在 * 前面还是后面：

const 在 * 前，是底层 const，p 所指的内容是常量；

const 在 * 后，是顶层 const，p 是常量，不可改变指向。

### const 修饰对象

`const A a(42,38);` 整个对象的值是不能被修改的

只有被声明为 const 的成员函数才能被 const 类对象所调用

### const 修饰成员函数

const 保证函数不会修改任何成员变量

声明和定义都需要加上 const 

成员函数后面加 const 是重载： `int func() {}` 和 `int func() const{}` 实际相当于 `int func(A* this) {}` 和 `int func(A* this) const {}` . 其中 A 为类的名字。