# GCC

gcc/g++ 执行编译工作的时候，总共需要 4 步：

1.  **预处理**，生成 `.i` 的文件[预处理器cpp]
2.  **编译**，将预处理后的文件转换成汇编语言， 生成文件 `.s` [编译器egcs]
3.  **汇编**，由汇编变为目标代码(机器代码)生成 `.o` 的文件[汇编器as]
4.  **链接**，连接目标代码， 生成可执行程序 [链接器ld]

---

以下是参数（注意大小写）

| 选项    | 说明                                                         |
| ------- | ------------------------------------------------------------ |
| -E      | 只激活预处理,这个不生成文件, 你需要把它重定向到一个输出文件里面。 |
| -S      | 只激活预处理和编译，就是指把文件编译成为汇编代码。           |
| -c      | 只激活预处理,编译,和汇编,也就是他只把程序做成obj文件。       |
| -o file | 生成可执行文件，名为 file 不指定名字的话即为 a.out<br />前三个选项如果想要自定义文件名的话，可以使用 `-o` 选项，如<br /> `gcc -S main.c -o test.s` 会生成 test.s 的汇编文件 |
| -g      | 生成供调试用的可执行文件<br />可以用 `strip` 命令删除文件中的 debug 信息 `$ strip a.out` |
| -s      | 直接生成与运用strip同样效果的可执行文件（删除了所有符号信息）。 |
| -O      | 编译器对代码进行自动优化编译，输出效率更高的可执行文件。<br />还可以在后面加上数字指定优化级别 `-O2`, `-O3`  数字越大越优化<br />默认`O1` ，一般可选择 2，如果选择 3 会有一定风险 |
| -W      | 在编译中开启一些额外的警告（warning）信息<br />`-Wall` 将所有的警告信息全开 |
| -L dir  | 制定编译的时候，搜索库的路径。比如你自己的库，可以用它制定目录，不然编译器将只在标准库的目录找。这个dir就是目录的名称。 |
| -I dir  | 在你是用 `#include "file" `的时候, gcc/g++ 会先在当前目录查找你所制定的头文件, 如果没有找到, 他回到默认的头文件目录找, 如果使用 -I 制定了目录,他会先在你所制定的目录查找, 然后再按常规的顺序去找。 |

---

多文件编译：

```bash
$ gcc main.c test.c -o main
```

```bash
$ gcc -c main.c
$ gcc -c test.c
$ gcc -o main main.o test.o
```

